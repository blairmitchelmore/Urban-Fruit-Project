


- if @fruit_caches.nil? || @fruit_caches.count <= 0
  %h1 Search
  - if @fruit_caches.count == 0 && @query
    .alert.alert-warning
      %h4= "No #{@keyword ? @keyword : @query} found near #{(@location ? @location : "you")}"
      Remember that all searches are based on your current location unless you specify a location in the query.
  .row.well
    .span5
      = form_tag( "/search", :method => "get", :class => "form-search") do 
        = text_field_tag :q, @query, :class => "input-medium span3"
        = submit_tag( "Search", :class => "btn btn-primary")
    .span4{ :style => "border-left: 1px solid #CCC; padding-left: 2em"}
      Try things like:
      %ul
        %li pears
        %li Pears near Oakville
        %li Cherries in Ottawa
        %li Oakville, ON
        %li Macin*
        %li tree AND sour
    
- else 
  %h1 Search results

  %table
    %tr
      %th Name
      %th Description
      %th Rating    
      %th Latitude
      %th Longitude
      %th 
      %th 
      %th 

    - @fruit_caches.each do |fruit_cache| 
      %tr
        %td= fruit_cache.name
        %td= fruit_cache.description
        %td= fruit_cache.rating 
        %td= fruit_cache.latitude
        %td= fruit_cache.longitude
        %td= link_to 'Show', fruit_cache
        
        - if can? :edit, fruit_cache 
          %td= link_to 'Edit', edit_fruit_cache_path(fruit_cache)

        - if can? :destroy, fruit_cache
          = link_to 'Destroy', fruit_cache, :confirm => 'Are you sure?', :method => :delete

  %br

  = gmaps4rails(@google_maps_json)

